<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>窝立方-账户管理</title>
	<div th:replace="fragments/resourceLink :: resourceLink"></div>
	<script th:src="@{/resources/js/Address.js}"></script>
	<script th:src="@{/resources/js/uploadImage.js}"></script>
	<script th:src="@{/resources/js/ImageFile.js}"></script>
	<script th:src="@{/resources/js/usercheck.js}"></script>
	<script th:src="@{/resources/js/validation.js}"></script>
</head>
<body class="pace-done">
<div th:replace="fragments/header :: header">&nbsp;</div>
<div class="page-container" style="min-height: 518px;">
	<div class="page-content">
	<div th:replace="fragments/left :: userLeftItem">&nbsp;</div>
	<div class="content-wrapper">
		<div class="page-header page-header-default">
			<div class="page-header-content">
				<div class="page-title">
					<h4><i class="icon-arrow-left52 position-left"></i> <span class="text-semibold">账号管理</span></h4>
					<a class="heading-elements-toggle"><i class="icon-more"></i></a>
				</div>
			</div>

		</div>

			<div class="content">
				<div class="panel panel-white r-panel-content">
					<div class="panel-body">
						<form th:object="${user}" data-th-action="@{/updateUserInfo}+'?_csrf='+${_csrf.token}" method="post" enctype="multipart/form-data">
							<input type="hidden" name="token" th:value="${session.token}">
							<fieldset>
								<legend class="text-semibold">用户信息</legend>
								<div class="form-group">
									<div class="row">
										<div class="col-md-6">
											<label>账户名</label>
											<span class="help-block" data-th-text="*{username}" ></span>
										</div>
										<div class="col-md-6">
											<label>类型</label>
											<span class="help-block" th:text="*{ role == 0 ? '普通用户':role==4?'品牌商':role==3?'设计师':role==1?'电商':role==2?'装修公司':role==5?'管理员':role==6?'建模师':role==7?'建模审核员':role==8?'运营专员':role==9?'程序测试员':'线下经销商'}"></span>
										</div>
									</div>
								</div>

								<div class="form-group">
									<div class="row">
										<div class="col-md-6">
											<label>呢称</label>
											<input type="text" th:value="*{nickname}" name="nickname" class="form-control">
											<span class="help-block" style="color: red"  th:if="${#strings.defaultString(param.error,1) == #strings.defaultString('2',1)}">呢称已存在</span>
										</div>
										<div class="col-md-6">
											<label>手机</label>
											<input type="text" th:value="*{mobile}" name="mobile" class="form-control">
											<span class="help-block"  name="mobile" style="color: red;"></span>
										</div>
									</div>
								</div>


								<div class="form-group">
									<div class="row">
										<div class="col-md-6">
											<label>邮箱</label>
											<input type="text" th:value="*{email}" maxlength="40" required="required" name="email" class="form-control">
											<span class="help-block" name="email" style="color: red;"></span>
										</div>
									</div>
								</div>
							</fieldset>

							<fieldset sec:authorize="hasAnyRole('ROLE_SELLER','ROLE_DECORATION')" th:if="${#authentication.Principal.grade != '3'}">
								<legend class="text-semibold">商家信息</legend>
								<div class="form-group">
									<div class="row">
										<div class="col-md-4">
											<label>省</label>
											<select id="cmbProvince" name="province" class="form-control"></select>
										</div>
										<div class="col-md-4">
											<label>市</label>
											<select id="cmbCity" name="city" class="form-control"></select>
										</div>
									</div>
									<span class="help-block"  ></span>
								</div>

								<div class="form-group" >
									<div class="row">
										<div class="col-md-6">
											<label>公司名</label>
											<span class="help-block" data-th-text="${Certification!=null ? Certification.companyName : ''}"></span>
										</div>

										<div class="col-md-6">
											<label>联系人</label>
											<span class="help-block" data-th-text="${Certification!=null ? Certification.contactName : ''}" ></span>
										</div>
									</div>
								</div>

								<div class="form-group" >
									<div class="row">
										<div class="col-md-6">
											<label>联系手机</label>
											<span class="help-block" data-th-text="${Certification!=null ? Certification.contactMobile : ''}"></span>
										</div>

										<div class="col-md-6">
											<label>公司网站</label>
											<span class="help-block" data-th-text="${Certification!=null ? Certification.website : ''}"></span>
										</div>
									</div>
								</div>

								<div class="form-group" >
									<div class="row">
										<div class="col-md-6">
											<label>联系电话</label>
											<span class="help-block" data-th-text="${Certification!=null ? Certification.contactPhone: ''}"></span>
										</div>

										<div class="col-md-6">
											<label  th:text="${Certification !=null && Certification.certificationStatus!=null &&  Certification.certificationStatus eq '认证成功' ? '已认证': '未认证'}"></label>
											<span class="help-block  icon-checkmark4" th:if="${Certification !=null && Certification.certificationStatus!=null && Certification.certificationStatus eq '认证成功'}"></span>
										</div>
									</div>
								</div>
								<div class="form-group">
									<div class="col-md-6">
										<label class="display-block">Logo</label>

										<div class="col-lg-3 col-md-6">
											<div class="thumbnail no-padding">
												<div class="thumb" th:object="${#request}">
													<img th:onerror="|this.src='*{getScheme()+'://'+getServerName()+':'+getServerPort()+'/resources/images/logo.png'}'|" id="previewImg" data-th-src="|http://cdn-test.dodojia.cn/${businessInfo !=null?businessInfo.logo:''}?x-oss-process=style/product-normal|">
												</div>
											</div>
										</div>
										<div class="uploader">
											<input accept="image/*" type="file" class="file-styled" id="uploadImg" name="logoFile"><span class="action btn bg-warning" style="-webkit-user-select: none;">打开文件</span>
											<div style="color:red"></div>
										</div>
										<span class="help-block">支持格式: gif, png, jpg. 文件最大 2Mb</span>
									</div>


									<div class="col-md-6">
										<label class="display-block">营业执照</label>

										<div class="col-lg-3 col-md-6">
											<div class="thumbnail no-padding">
												<div class="thumb">
													<img th:if="${Certification !=null && Certification.licenseImg !=null}" data-th-src="|http://cdn-test.dodojia.cn/${Certification.licenseImg}?x-oss-process=style/product-normal|">
												</div>
											</div>
										</div>

									</div>
								</div>
							</fieldset>
							<div class="text-right">
								<button type="button" class="btn btn-primary" id="user_sub">保存 <i class="icon-arrow-right14 position-right"></i></button>
							</div>
						</form>
					</div>
				</div>
			</div>

		</div>
	</div>
	</div>
	<div th:replace="fragments/footer :: footer">&copy; 2013 The Static Templates</div>
    <script type="application/javascript">
		var province;
		var city;
	</script>
    <script data-th-if="${businessInfo!= null}" type="application/javascript">
		province='[[${businessInfo.province}]]';
		city='[[${businessInfo.city}]]';
	</script>
	<script type="text/javascript">
		addressInit('cmbProvince', 'cmbCity', 'cmbArea',province,city);
	</script>
</body>
</html>
