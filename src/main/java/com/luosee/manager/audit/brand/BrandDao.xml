<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
     <!--
    private Integer sellerId;//品牌ID
    private String sellerName;//品牌名字
    private String sellerLogo;//品牌LOGO
    private Integer businessInfoId;//品牌对应的商家ID
    private Integer visual;//默认为0（可见），1（不可见）
    private Timestamp submitTime;//提交时间
    private String certificationStatus;// 默认值（认证中），认证成功，认证失败
    private String certificationCause;// 默认值（认证中），认证成功，认证失败
    private Timestamp certificationTime;//审核认证时间
    -->

<mapper namespace="com.luosee.manager.audit.brand.BrandDao">
    <resultMap type="com.luosee.manager.audit.brand.Brand" id="brandResultMap">
        <id property="sellerId" column="sellerId" />
        <result property="sellerName" column="sellerName" />
        <result property="sellerLogo" column="sellerLogo" />
        <result property="businessInfoId" column="businessInfoId" />
        <result property="visual" column="visual" />
        <result property="submitTime" column="submitTime" />
        <result property="certificationStatus" column="certificationStatus" />
        <result property="certificationCause" column="certificationCause" />
        <result property="certificationTime" column="certificationTime" />
    </resultMap>


    <select id="selectAllunaudited"  resultMap="brandResultMap" parameterType="java.util.Map">
        SELECT * from tb_seller
        <where>
            (certificationStatus = '认证中' or certificationStatus = '认证失败')
            <if test="title != null">
                and sellerName like '%${title}%'
            </if>
        </where>
        <if test="flag1 == '0'.toString()">
            ORDER BY sellerId ASC
        </if>
        <if test="flag1 == '1'.toString()">
            ORDER BY sellerId DESC
        </if>
        <if test="flag1 == '2'.toString()">
            ORDER BY sellerName ASC
        </if>
        <if test="flag1 == '3'.toString()">
            ORDER BY sellerName DESC
        </if>
        <if test="flag1 == '4'.toString()">
            ORDER BY certificationTime ASC
        </if>
        <if test="flag1 == '5'.toString()">
            ORDER BY certificationTime DESC
        </if>
        <if test="flag1 == '8'.toString()">
            ORDER BY certificationStatus ASC
        </if>
        <if test="flag1 == '9'.toString()">
            ORDER BY certificationStatus DESC
        </if>
        limit #{page.dbIndex},#{page.dbNumber}
    </select>

    <select id="selectAllaudited"  resultMap="brandResultMap" parameterType="java.util.Map">
        SELECT * from tb_seller
        <where>
            certificationStatus = '认证成功'
            <if test="title != null">
                and sellerName like '%${title}%'
            </if>
        </where>
        <if test="flag1 == '4'.toString()">
            ORDER BY sellerId ASC
        </if>
        <if test="flag1 == '5'.toString()">
            ORDER BY sellerId DESC
        </if>
        <if test="flag1 == '2'.toString()">
            ORDER BY sellerName ASC
        </if>
        <if test="flag1 == '3'.toString()">
            ORDER BY sellerName DESC
        </if>
        <if test="flag1 == '1'.toString()">
            ORDER BY certificationTime ASC
        </if>
        <if test="flag1 == '0'.toString()">
            ORDER BY certificationTime DESC
        </if>
        limit #{page.dbIndex},#{page.dbNumber}
    </select>

    <select id="countun"  parameterType="java.util.Map" resultType="int">
        SELECT count(*) from tb_seller
        <where>
            (certificationStatus = '认证中' or certificationStatus = '认证失败')
            <if test="title != null">
                and sellerName like '%${title}%'
            </if>
        </where>
    </select>

    <select id="count" parameterType="java.util.Map" resultType="int">
        SELECT count(*) from tb_seller
        <where>
        certificationStatus = '认证成功'
            <if test="title != null">
                and sellerName like '%${title}%'
            </if>
       </where>
    </select>

    <update id="veto" parameterType="com.luosee.manager.audit.brand.Brand">
        UPDATE tb_seller set certificationCause=#{certificationCause},certificationStatus=#{certificationStatus} WHERE sellerName=#{sellerName}
    </update>

    <update id="pass" parameterType="com.luosee.manager.audit.brand.Brand">
        UPDATE tb_seller set certificationStatus=#{certificationStatus} WHERE sellerId=#{sellerId}
    </update>

    <update id="cancel" parameterType="com.luosee.manager.audit.brand.Brand">
        UPDATE tb_seller set certificationStatus=#{certificationStatus} WHERE sellerId=#{sellerId}
    </update>

    <update id="change" parameterType="com.luosee.manager.audit.brand.Brand">
       UPDATE tb_seller set certificationStatus=#{certificationStatus} WHERE sellerId=#{sellerId}
    </update>
</mapper>

